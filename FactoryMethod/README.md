# 工厂方法模式

## 定义

定义一个用于创建对象的接口，让子类决定实例化哪一个类，工厂方法使一个类的实例化，延迟到其子类。

## 目录框架

- `index.php`文件，前端页面，可以看作View，将数据发送到handle.php
- `handle.php`文件，客户端（控制器），可以理解成Controller，获取前端数据，调用工厂方法生成对应类
- `Model`目录，存放简单工厂模式的核心代码，一般是可复用、易扩展的代码
- `Factory*.php`文件，工厂类
- `Operation*.php`文件，实现类
- `IFactory.php`文件，工厂类的抽象接口
- `Operation.php`文件，实现类的抽象类

## 与工厂方法对比

### 简单工厂

简单工厂可适用于大部分比较简单的场景，但是它违背了开放封闭原则，扩展的时候需要修改工厂类。

### 工厂方法

工厂方法克服了简单工厂违背开放-封闭原则的缺点，使用了多态性。但缺点就是每加一个产品的时候就要新增一个工厂类和实现类，增加类额外的开发量。
而且这样还是没有避免修改客户端的代码，还是要在客户端判断。不过文中提到可以利用"反射"解决分支判断的问题，后面再谈。
